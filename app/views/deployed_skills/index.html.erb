<% provide(:title, (t('ManagingSkills'))) %>

<% provide(:search_text, t('SearchIn') % t('Skills')) %>

<% provide :page_heading do %>
    <%=t('Skills')%>
<% end %>

<% provide :navigation do %>
  <%= render partial: "shared/index_view_navigation", locals: {this_object: DeployedSkill} %>
<% end %>


<div class="row">
  <div class="mat-form-field col-md-4">
    <%= render partial: "shared/simple_search", locals: {path: deployed_skills_path} %>
  </div>
  <div class="col-md-4">
  <%= will_paginate @skills %>
  </div>
  <div class="mat-form-field col-md-4" >
    <div class="row">
      <div class="mat-form-field col-md-4" >
        <%= t('LinesPerPage') %>
      </div>
      <div class="mat-form-field col-md-4">
        <%= select_tag :per_page, options_for_select([10,20,50], params[:per_page].to_i),
           :onchange => "window.location='#{request.path}?per_page='+this.value;", class: "mat-input-element"  %>
      </div>
    </div>
  </div>
</div>

<table class="table table-hover table-clickable">
  <thead>
    <tr>
      <% ignore do "Data model not ready" %>
      <% if not session[:cart_id].nil? %>
        <th><%=t('InstancesCountToBeAdded')%></th>
      <% end %>
      <% ignore end %>
      <th><%=t('TechCode')%></th>
      <th><%=t('Name')%></th>
      <th><%=t('UsedBO')%></th>
      <th><%=t('ValuesList')%></th>
      <th><%=t('Owner')%></th>
      <th class="no-wrap"><%= t('UpdatedBy') %></th>
      <th class="no-wrap text-right"><%= t('UpdatedAt') %></th>
    </tr>
  </thead>

  <tbody>
    <% @skills.each do |skill| %>
      <tr data-href="<%= url_for skill %>">
        <% ignore do "Data model not ready" %>
        <% if not session[:cart_id].nil? %>
          <td>
            <%= render partial: "shared/add_to_cart", locals: { isCompact: true, model: @skill, item: skill } %>
          </td>
        <% end %>
        <% ignore end %>
        <td class="no-wrap"><%= skill.code %></td>
        <td><%= link_to skill.translated_name, skill %></td>
        <td><%= link_to translation_for(skill.parent.name_translations), skill.parent %></td>
        <td><%= link_to skill.values_list&.code, skill.values_list if skill.values_list %></td>
        <td><%= skill.responsible_name %></td>
        <td><%= skill.updated_by %></td>
        <td class="text-right"><%= format_date(skill.updated_at) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<div class="row">
  <div class="mat-form-field col-md-4">
  </div>
  <div class="col-md-4">
    <%= will_paginate @skills %>
  </div>
</div>
